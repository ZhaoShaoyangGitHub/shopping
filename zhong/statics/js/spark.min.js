jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,s,n){return jQuery.easing[jQuery.easing.def](t,e,i,s,n)},easeInQuad:function(t,e,i,s,n){return s*(e/=n)*e+i},easeOutQuad:function(t,e,i,s,n){return-s*(e/=n)*(e-2)+i},easeInOutQuad:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e+i:-s/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,s,n){return s*(e/=n)*e*e+i},easeOutCubic:function(t,e,i,s,n){return s*((e=e/n-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e*e+i:s/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,s,n){return s*(e/=n)*e*e*e+i},easeOutQuart:function(t,e,i,s,n){return-s*((e=e/n-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e*e*e+i:-s/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,s,n){return s*(e/=n)*e*e*e*e+i},easeOutQuint:function(t,e,i,s,n){return s*((e=e/n-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,s,n){return(e/=n/2)<1?s/2*e*e*e*e*e+i:s/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,s,n){return-s*Math.cos(e/n*(Math.PI/2))+s+i},easeOutSine:function(t,e,i,s,n){return s*Math.sin(e/n*(Math.PI/2))+i},easeInOutSine:function(t,e,i,s,n){return-s/2*(Math.cos(Math.PI*e/n)-1)+i},easeInExpo:function(t,e,i,s,n){return 0==e?i:s*Math.pow(2,10*(e/n-1))+i},easeOutExpo:function(t,e,i,s,n){return e==n?i+s:s*(-Math.pow(2,-10*e/n)+1)+i},easeInOutExpo:function(t,e,i,s,n){return 0==e?i:e==n?i+s:(e/=n/2)<1?s/2*Math.pow(2,10*(e-1))+i:s/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,s,n){return-s*(Math.sqrt(1-(e/=n)*e)-1)+i},easeOutCirc:function(t,e,i,s,n){return s*Math.sqrt(1-(e=e/n-1)*e)+i},easeInOutCirc:function(t,e,i,s,n){return(e/=n/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+i:s/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,s,n){var o=1.70158,a=0,r=s;if(0==e)return i;if(1==(e/=n))return i+s;if(a||(a=.3*n),r<Math.abs(s)){r=s;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(s/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a))+i},easeOutElastic:function(t,e,i,s,n){var o=1.70158,a=0,r=s;if(0==e)return i;if(1==(e/=n))return i+s;if(a||(a=.3*n),r<Math.abs(s)){r=s;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(s/r);return r*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/a)+s+i},easeInOutElastic:function(t,e,i,s,n){var o=1.70158,a=0,r=s;if(0==e)return i;if(2==(e/=n/2))return i+s;if(a||(a=n*(.3*1.5)),r<Math.abs(s)){r=s;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(s/r);return e<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a))+i:r*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)*.5+s+i},easeInBack:function(t,e,i,s,n,o){return void 0==o&&(o=1.70158),s*(e/=n)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,s,n,o){return void 0==o&&(o=1.70158),s*((e=e/n-1)*e*((o+1)*e+o)+1)+i},easeInOutBack:function(t,e,i,s,n,o){return void 0==o&&(o=1.70158),(e/=n/2)<1?s/2*(e*e*(((o*=1.525)+1)*e-o))+i:s/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i},easeInBounce:function(t,e,i,s,n){return s-jQuery.easing.easeOutBounce(t,n-e,0,s,n)+i},easeOutBounce:function(t,e,i,s,n){return(e/=n)<1/2.75?s*(7.5625*e*e)+i:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+i:s*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,s,n){return e<n/2?.5*jQuery.easing.easeInBounce(t,2*e,0,s,n)+i:.5*jQuery.easing.easeOutBounce(t,2*e-n,0,s,n)+.5*s+i}}),$(function(){var t={isVideoPlaying:!1,animationDone:!0,animationQueue:[!0,!0,!0,!0],is_iPad:!1,init:function(){this.is_iPad=e.is_iPad(),this.adjustWebFont(),this.s1VideoPlay(),this.initCommonSwiper(),this.is_iPad||this.s3VideoBgPlay(),this.animate()},adjustWebFont:function(){var t=window.navigator.userAgent.toLowerCase();(t.indexOf("se 2.x")>0||t.indexOf("firefox")>0)&&$(".web-font").css("font-family",'"Open Sans", "Helvetica Neue", "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Micro Hei", Arial, sans-serif')},s1VideoPlay:function(){var t=this,i=$(".mask-item"),s=$(".video-cover-item"),n=$(".video-item");i.bind("mouseenter",function(){$(this).addClass("active");var e=$(this).data("target"),i=n.eq(e),o=500;if(t.isVideoPlaying?o=0:0!==e&&3!==e||(o=600),t.animationDone=t.animationQueue[0]&&t.animationQueue[1]&&t.animationQueue[2]&&t.animationQueue[3],t.animationDone){t.animationDone=!1;for(var a=s.length-1;a>=0;a--)t.animationQueue[a]=!1;s.each(function(i){i===e?($(this).find(".section-bg").css("transition","opacity .2s ease-in-out"),$(this).find(".section-bg").css("opacity","0"),$(this).animate({width:"100%",opacity:0},o,"easeInOutQuad",function(){$(this).find(".section-bg").css("transition",""),$(this).css("opacity","0"),t.animationQueue[i]=!0})):$(this).animate({width:"0%",opacity:0},o,"easeInOutQuad",function(){$(this).css("opacity","0"),t.animationQueue[i]=!0})})}i.animate({opacity:1},500),i.css("z-index",4);var r=i.find(".video-bg").find("video"),c=r.get(0).currentTime>0&&!r.get(0).paused&&!r.get(0).ended&&r.get(0).readyState>2;c||r.trigger("play"),t.isVideoPlaying=!0}),i.bind("mouseleave",function(){var t=$(this).data("target");$(this).removeClass("active");var e=n.eq(t);e.find(".video-bg").find("video").trigger("pause"),e.find(".video-bg").find("video")[0].currentTime=0,e.css("z-index",""),e.animate({opacity:0},0)}),$(".mask-list").bind("mouseleave",function(){var e=setInterval(function(){t.animationDone=t.animationQueue[0]&&t.animationQueue[1]&&t.animationQueue[2]&&t.animationQueue[3],t.animationDone&&(s.each(function(){$(this).css("width","25%"),$(this).css("opacity","1"),$(this).find(".section-bg").css("opacity","1")}),t.isVideoPlaying=!1,clearInterval(e))},100)}),i.bind("touchstart",function(t){t.preventDefault(),i.removeClass("active"),$(this).addClass("active"),i.css("border-right","1px solid rgba(112, 116, 115, 0.7)"),i.find(".mask").css("background","rgba(0,0,0,0.4)"),i.find(".text").css("opacity","0"),i.find(".top-text").css("opacity","0.5"),$(this).find(".top-text").css("opacity","0"),s.hide();var e=$(this).data("target");n.each(function(t){t===e?($(this).css("z-index","4"),$(this).css("opacity","1"),$(this).find(".video-bg").find("video")[0].currentTime=0,$(this).find(".video-bg").find("video").trigger("play")):($(this).css("z-index",""),$(this).css("opacity",""))})}),$(window).bind("touchmove",function(){e.checkVisible($(".spark-s1"))||(i.removeClass("active"),i.css("border-right",""),i.find(".mask").css("background",""),i.find(".top-text").css("opacity",""),i.find(".text").css("opacity",""),n.find(".video-bg video").trigger("pause"),n.css("z-index",""),n.css("opacity",""),s.show())})},s3VideoBgPlay:function(){var t=$(".spark-s3 .section-abstract video"),i=!1;$(window).on("scroll",function(){e.checkVisible(t)?i||(i=!0,isNaN(t[0].duration)||(t[0].currentTime=0,t.trigger("play"))):isNaN(t[0].duration)||(t[0].currentTime=0,t.trigger("pause"),i=!1)})},initCommonSwiper:function(){var t=this,e=["#s2-part1","#s2-part2","#s2-part3","#s2-part4","#s3-part4"];e.forEach(function(e){var i=new Swiper(e+"-swiper-container",{effect:"fade",loop:!0,width:560,height:400,observer:!0,observeParents:!0,pagination:e+"-swiper-container .swiper-pagination",paginationClickable:!0,prevButton:e+"-swiper-container .swiper-btn-prev",nextButton:e+"-swiper-container .swiper-btn-next",speed:500,onSlideNextStart:function(t){var i=$(e+"-control-list .control-item"),s=t.activeIndex-1;s===i.length&&(s=0),i.removeClass("active").eq(s).addClass("active")},onSlidePrevStart:function(t){var i=$(e+"-control-list .control-item"),s=t.activeIndex-1;i.removeClass("active").eq(s).addClass("active")},onSlideChangeStart:function(t){if("#s2-part1"===e){var i=$(e+"-swiper-container video").eq(t.activeIndex),s=$(e+"-swiper-container video").eq(t.previousIndex);isNaN(s[0].duration)||(s.trigger("pause"),s.currentTime=0),isNaN(i[0].duration)||(i.currentTime=0,i.trigger("play"))}}});$(e+"-control-list .control-item").hover(function(){$(e+"-control-list .control-item").removeClass("active"),$(this).addClass("active");var t=$(this).index()+1;i.slideTo(t)}),"#s2-part1"===e&&$(".spark-s2").on("section-open",function(){var t=$(e+"-swiper-container video").eq(i.activeIndex);isNaN(t[0].duration)||(t.currentTime=0,t.trigger("play"))}),t.is_iPad||$(window).on("scroll",function(){var t=$(e+"-swiper-container").offset().top,s=$(window).scrollTop(),n=$(e+"-swiper-container").height(),o=$(window).height();t-s<(o-n)/2&&t-s>0?i.enableKeyboardControl():i.disableKeyboardControl()})})},s8Swiper:function(){var t=new Swiper("#s8-swiper-container",{loop:!0,initialSlide:1,loopedSlides:6,keyboardControl:!0,centeredSlides:!0,observer:!0,observeParents:!0,pagination:"#s8-swiper-container .swiper-pagination",paginationClickable:!0,prevButton:"#s8-swiper-container .swiper-btn-prev",nextButton:"#s8-swiper-container .swiper-btn-next",slidesPerView:"auto",spaceBetween:150,speed:500}),e=new Swiper("#s8-modal-swiper-container",{loop:!0,centeredSlides:!0,observer:!0,observeParents:!0,keyboardControl:!0,pagination:"#s8-modal-swiper-container .swiper-pagination",paginationClickable:!0,prevButton:"#s8-modal-swiper-container .swiper-btn-prev",nextButton:"#s8-modal-swiper-container .swiper-btn-next",speed:500}),i=$(".modal-container");$("#s8-swiper-container .swiper-slide").click(function(){i.fadeIn(500),e.slideTo(t.activeIndex-5,0)}),$(".modal-container .icon-close").click(function(){t.slideTo(e.activeIndex+5,0),i.fadeOut(500)})},animate:function(){$(".animate").each(function(){e.checkVisible($(this))&&$(this).addClass("animated")}),$(window).on("scroll",function(){$(".animate").each(function(){e.checkVisible($(this))&&$(this).addClass("animated")})})}},e={checkVisible:function(t){var e=$(window).height(),i=$(window).scrollTop(),s=i+e,n=t.offset().top+t.height()/2;return offsetBottom=t.offset().top+t.height(),offsetBottom>i&&n<s},is_iPad:function(){var t=navigator.userAgent.toLowerCase();return"ipad"==t.match(/iPad/i)}};t.init(),DUI.Layzr()}),function(t,e){function i(t){this.$section=t,this.$detail=t.find(".section-detail"),this.$abstract=t.find(".section-abstract"),this.$moreBtn=t.find(".section-more a"),this.$closeBtn=t.find(".section-close a"),this.$closeSection=t.find(".section-close"),this.$sectionsContainer=e("#dji-product-common"),this.$AllSections=this.$sectionsContainer.children(),this._animtingClass="collapse-section-animting",this._openedClass="collapse-section-opened",this._targetClass="transition-animting",this.$moreBtn.bind("click",this.open.bind(this)),this.$closeBtn.bind("click",this.close.bind(this))}function s(t){return t<.5?2*t*t:-1+(4-2*t)*t}function n(t){var e=.85*t;return e<600&&(e=600),e}function o(e,i,s,n){function o(){var c=Date.now(),h=(c-r)/e,l=n?n(h):h;i(l),h<=1?t.requestAnimFrame(o):(a=!0,s())}var r=Date.now();a=!1,t.requestAnimFrame(o)}var a=!0,r=!1,c=null,h=function(){var e=t.getComputedStyle(document.documentElement,""),i=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"-"+i+"-"}();e(t).on("mousewheel",function(){return a}),t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),i.prototype.fixedSection=function(){var i=e(t).scrollTop();this.$sectionsContainer.css("height",this.$sectionsContainer.height()),this.$AllSections.each(function(){if(!e(this).hasClass("sub-nav-wrap")||"fixed"!==e(this).css("position")){var t=e(this).offset().top-i;e(this).css("top",t)}}),this.$AllSections.each(function(){e(this).hasClass("sub-nav-wrap")&&"fixed"===e(this).css("position")||e(this).css("position","fixed")})},i.prototype.getSectionsInSight=function(){for(var t={prev:[],next:[],all:[]},i=this.getPrevSectionsInSightNum(this.$section),s=this.getNextSectionsInSightNum(this.$section),n=this.$section.prev(),o=0;o<i;o++)n.addClass("in-view"),t.prev.push(n),n=n.prev();for(var a=this.$section.next();s>0;){for(;"none"===a.css("display");)a=a.next();0===a.length&&(a=e(".site-footer")),a.addClass("in-view"),t.next.push(a),a=a.next(),s--}return this.$section.addClass("in-view"),t.all=t.prev.concat(this.$section,t.next),t},i.prototype.getPrevSectionsInSightNum=function(t){var i=t.offset().top,s=e(document).scrollTop(),n=t.prev();return s<i?1+this.getPrevSectionsInSightNum(n):0},i.prototype.getNextSectionsInSightNum=function(i){var s=e(t).height(),n=i.height(),o=i.offset().top,a=e(document).scrollTop(),r=i.next(),c=s-(o-a)-n;return c>0&&0!==r.length?1+this.getNextSectionsInSightNum(r):c>0&&0===r.length?1:0},i.prototype.open=function(){if(!r){r=!0;var i=this,s=this.getSectionsInSight().next;this.fixedSection(),this.$closeSection.css("position",""),this.$closeSection.css("top",""),this.$section.addClass(this._animtingClass),s.forEach(function(t){t.addClass(i._targetClass)}),this.$detail.addClass("active"),this.$detail.css("position","absolute"),this.$detail.show(),this.$moreBtn.addClass("active"),this.$section.trigger("section-open"),this.sectionsSlideDown(s);var n=!1;e(t).on("scroll",function(){n||t.requestAnimFrame(function(){i.closeBtnFixedTop(),n=!1}),n=!0})}},i.prototype.sectionsSlideDown=function(i){function a(s){if(c&&closeOffsetTop<p){var n=f-(m-50)*s;e(t).scrollTop(n)}var o=v*s,a=-50*s;$.$detail.css(h+"transform","translate3d(0, "+a+"px, 0)"),i.forEach(function(t){t.css(h+"transform","translate3d(0, "+o+"px, 0)")})}function l(){c&&closeOffsetTop<p&&e(t).scrollTop(f-(m-50)),$.closeOpened(),$.$sectionsContainer.css("height",""),$.$AllSections.each(function(){e(this).hasClass("sub-nav-wrap")&&"fixed"===e(this).css("position")||(e(this).css("position",""),e(this).css("top",""))}),$.$detail.css("position","relative"),$.$detail.css(h+"transform",""),$.$detail.css("margin-top","-50px"),i.forEach(function(t){t.css(h+"transform",""),t.removeClass($._targetClass)}),$.$section.addClass($._openedClass),e(".in-view").removeClass("in-view"),r=!1}var u=e(t).height(),d=this.$section.height(),p=this.$section.offset().top,f=e(document).scrollTop(),v=u-(p-f)-d,g=n(v),m=0;c&&(m=c.find(".section-detail").innerHeight(),closeOffsetTop=c.offset().top);var $=this;o(g,a,l,s)},i.prototype.closeBtnFixedTop=function(){var i=e(t).height(),s=this.$detail.height(),n=this.$detail.offset().top,o=e(document).scrollTop(),a=n-o,r=i-(n-o)-s;a<=60&&r<=i-150?(this.$closeSection.css("position","fixed"),this.$closeSection.css("top","75px")):(this.$closeSection.css("position",""),this.$closeSection.css("top",""))},i.prototype.closeOpened=function(){if(c){var t=c.find(".section-detail");t.removeClass("active").css("position","absolute").css("margin-top","0").hide(),c.removeClass(this._openedClass),c.removeClass(this._animtingClass),c=this.$section}else c=this.$section},i.prototype.close=function(){if(!r){r=!0,e(t).off("scroll",this.closeBtnFixedTop),this.$closeSection.css("position",""),this.$closeSection.css("top","");var i=this.$detail.offset().top,s=i+this.$detail.height(),n=e(t).scrollTop(),o=n+e(t).height();this.$detail.removeClass("active"),this.$section.removeClass(this._openedClass),this.$section.removeClass(this._animtingClass),c=null,n<i?this.closeFromBtm():s<o?this.closeFromTop():this.closeToCenter()}},i.prototype.closeFromBtm=function(){function i(t){var e=-(u+d*t),i=50*t;c.$detail.css(h+"transform","translate3d(0, "+i+"px, 0)"),l.css(h+"transform","translate3d(0, "+e+"px, 0)")}function n(){l.removeClass(c._targetClass),c.$detail.css("position","absolute"),c.$detail.css("margin-top","0"),c.$detail.hide(),l.css(h+"transform",""),r=!1}var a=this.getNextSectionsInSight(this.$section),c=this;a.forEach(function(t){t.addClass(c._targetClass)});var l=e("."+c._targetClass),u=a[0].offset().top-e(t).height()-e(t).scrollTop(),d=e(t).height()+e(t).scrollTop()-(this.$detail.offset().top+50),p=.75*d;p<600&&(p=600),o(p,i,n,s)},i.prototype.getNextSectionsInSight=function(i){for(var s=e(t).height(),n=i.find(".section-abstract").height(),o=i.offset().top,a=e(document).scrollTop(),r=i.next(),c=[],h=s-(o-a)-n;h>0;){for(;"none"===r.css("display");)r=r.next();0===r.length&&(r=e(".site-footer")),c.push(r),h-=r.height(),r=r.next()}return c},i.prototype.closeFromTop=function(){function i(i){var s=d+p*i,n=v-p*i+50;e(t).scrollTop(n),u.css(h+"transform","translate3d(0, "+s+"px, 0)")}function a(){u.removeClass(c._targetClass),c.$detail.css("position","absolute"),c.$detail.css("margin-top",""),c.$detail.hide(),u.css(h+"transform",""),c.$sectionsContainer.css("height",""),c.$AllSections.each(function(){e(this).hasClass("sub-nav-wrap")&&"fixed"===e(this).css("position")||(e(this).css("position",""),e(this).css("top",""))}),r=!1}var c=this;this.$abstract.addClass(this._targetClass);var l=this.getPreSectionsInSight(this.$section);l.forEach(function(t){t.addClass(c._targetClass)});var u=e("."+c._targetClass),d=e(t).scrollTop()-this.$abstract.offset().top-this.$abstract.height(),p=this.$section.next().offset().top-e(t).scrollTop(),f=n(p),v=this.$detail.offset().top;this.fixedSection(),o(f,i,a,s)},i.prototype.getPreSectionsInSight=function(i){for(var s=i.find(".section-detail").height(),n=i.find(".section-detail").offset().top,o=e(t).scrollTop(),a=i.prev(),r=[],c=n-o+s-i.find(".section-abstract").height();c>0;){for(;"none"===a.css("display");)a=a.prev();r.push(a),c-=a.hasClass("collapse-section")?a.find(".section-abstract").height():a.height(),a=a.prev()}return r},i.prototype.closeToCenter=function(){function i(i){var s=d+l*i,n=-(p+u*i);a.$abstract.css(h+"transform","translate3d(0, "+s+"px, 0)"),a.$section.next().css(h+"transform","translate3d(0, "+n+"px, 0)");var o=f-l*i+50;e(t).scrollTop(o)}function n(){a.$abstract.removeClass(a._targetClass),a.$section.next().removeClass(a._targetClass),a.$detail.css("position","absolute"),a.$detail.css("margin-top",""),a.$detail.hide(),a.$section.next().css(h+"transform",""),a.$abstract.css(h+"transform",""),a.$sectionsContainer.css("height",""),a.$AllSections.each(function(){e(this).hasClass("sub-nav-wrap")&&"fixed"===e(this).css("position")||(e(this).css("position",""),e(this).css("top",""))}),r=!1}var a=this,c=e(t).height(),l=parseInt(c/2,10),u=c-l,d=e(t).scrollTop()-this.$abstract.offset().top-this.$abstract.height(),p=this.$section.next().offset().top-e(t).height()-e(t).scrollTop(),f=this.$detail.offset().top,v=.75*l;v<600&&(v=600),this.$section.next().addClass(this._targetClass),this.$abstract.addClass(this._targetClass),this.fixedSection(),o(v,i,n,s)},e(".collapse-section").each(function(t){var s=e(this);new i(s)})}(window,jQuery);